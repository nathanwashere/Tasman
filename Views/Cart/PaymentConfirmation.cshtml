@model Tasman.Models.Booking
@{
    Layout = "~/Views/Shared/TravelLayout.cshtml";
    var paymentEmail = ViewBag.PaymentEmail as string;
    var paymentCard = ViewBag.PaymentCard as string;
    var paymentName = ViewBag.PaymentName as string;
    var paymentPhone = ViewBag.PaymentPhone as string;
    var message = ViewBag.Message as string;
}

<link rel="stylesheet" href="~/css/travel.css" />

<div class="main">
    <div class="page-container">
        <section class="hero-card">
            <div class="hero-text">
                <p class="eyebrow">Payment</p>
                <h1>Payment confirmed</h1>
                <p>Your booking has been paid. You can download your receipt now.</p>
                @if (!string.IsNullOrEmpty(message))
                {
                    <div class="pill" style="background:rgba(64,145,108,0.12);color:#40916c;">@message</div>
                }
            </div>
        </section>

        <div class="travel-card" style="max-width:820px;margin:18px auto;">
            <div class="travel-image-wrapper">
                <div class="travel-image" style="background-image:url('@Model.Travel?.ImageUrl');height:220px;"></div>
                <span class="travel-PackageType">@Model.Travel?.PackageType</span>
            </div>
            <div class="card-content">
                <p class="travel-country">@Model.Travel?.Country</p>
                <p class="travel-title">@Model.Travel?.Destination</p>
                <p class="travel-price">$@Model.TotalPrice</p>
                <p class="muted">Booking ID: @Model.Id | Rooms: @Model.Rooms | Status: @Model.Status</p>
            </div>
        </div>

        <div class="travel-card" style="max-width:820px;margin:18px auto;padding:20px;">
            <p class="eyebrow">Payment details</p>
            <ul style="list-style:none;padding:0;margin:0;line-height:1.8;">
                <li><strong>Name:</strong> @(string.IsNullOrEmpty(paymentName) ? "On file" : paymentName)</li>
                <li><strong>Email:</strong> @(string.IsNullOrEmpty(paymentEmail) ? Model.UserEmail : paymentEmail)</li>
                <li><strong>Card:</strong> @(string.IsNullOrEmpty(paymentCard) ? "Already confirmed" : paymentCard)</li>
                <li><strong>Phone:</strong> @(string.IsNullOrEmpty(paymentPhone) ? "Not provided" : paymentPhone)</li>
            </ul>
            <p class="muted" style="margin-top:10px;">A copy of this receipt will be emailed soon (email sending not implemented yet).</p>
            <div class="card-actions" style="margin-top:14px;display:flex;gap:10px;flex-wrap:wrap;">
                <a class="book-now-btn" href="/Cart/Receipt/@Model.Id">Download receipt (PDF)</a>
                <a class="buy-now-btn" href="/Cart">Back to cart</a>
            </div>
        </div>
    </div>
</div>
