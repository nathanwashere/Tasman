@model Tasman.Models.Booking
@{
    Layout = "~/Views/Shared/TravelLayout.cshtml";
    var user = ViewBag.User as Tasman.Models.User;
}

<link rel="stylesheet" href="~/css/travel.css" />

<div class="main">
    <div class="page-container">
        <section class="hero-card">
            <div class="hero-text">
                <p class="eyebrow">Checkout</p>
                <h1>Confirm your trip</h1>
                <p>We'll use your contact info from your profile. Card data is not stored.</p>
            </div>
            <div class="hero-badge">
                <span class="price-tag">$@Model.TotalPrice</span>
                <p>Total</p>
            </div>
        </section>

        <div class="travel-card" style="max-width:820px;margin:18px auto;">
            <div class="travel-image-wrapper">
                <div class="travel-image" style="background-image:url('@Model.Travel?.ImageUrl');height:220px;"></div>
                <span class="travel-PackageType">@Model.Travel?.PackageType</span>
            </div>
            <div class="card-content">
                <p class="travel-country">@Model.Travel?.Country</p>
                <p class="travel-title">@Model.Travel?.Destination</p>
                <p class="travel-price">Rooms: @Model.Rooms | Total: $@Model.TotalPrice</p>
            </div>
        </div>

        <form asp-action="Checkout" method="post" class="auth-form" style="max-width:820px;margin:18px auto;background:#fff;padding:22px;border-radius:14px;box-shadow:0 14px 40px rgba(0,0,0,0.08);">
            <input type="hidden" name="id" value="@Model.Id" />
            <div asp-validation-summary="ModelOnly" class="text-danger" style="margin-bottom:8px;"></div>
            <div class="form-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:14px;">
                <div class="form-group">
                    <label>Full Name</label>
                    <input name="cardHolder" class="form-control" value="@(user?.FirstName + " " + user?.LastName)" required />
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input name="email" type="email" class="form-control" value="@user?.Email" required />
                </div>
                <div class="form-group">
                    <label>Phone</label>
                    <input name="phone" class="form-control" value="@user?.PhoneNumber" />
                </div>
                <div class="form-group">
                    <label>Card Number</label>
                    <input name="cardNumber" class="form-control" placeholder="0000 0000 0000 0000" required />
                </div>
                <div class="form-group">
                    <label>Expiry</label>
                    <input name="expiry" class="form-control" placeholder="MM/YY" required />
                </div>
                <div class="form-group">
                    <label>CVV</label>
                    <input name="cvv" class="form-control" placeholder="123" required />
                </div>
            </div>
            <div class="form-actions" style="margin-top:16px;">
                <button type="submit" class="book-now-btn" style="width:100%;text-align:center;">Confirm checkout</button>
            </div>
            <p class="muted" style="margin-top:10px;">A PDF receipt will be ready after confirmation. Email delivery is coming soon.</p>
        </form>
    </div>
</div>
